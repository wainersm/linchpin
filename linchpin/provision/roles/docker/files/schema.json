{
  "res_defs": {
      "type": "list",
      "schema": {
        "anyof": [
            {
             "type": "dict",
             "schema": {
               "role": {
                 "type": "string",
                 "required": true,
                 "allowed": ["docker_image"]
               },
               "name": { "type": "string", "required": true },
               "path": { "type": "string", "required": false },
               "api_version": { "type": "string", "required": false },
               "buildargs": {
                 "type": "dict",
                 "schema": { "type": "string", "required": true }
               },
               "cacert_path": { "type": "string", "required": false },
               "cert_path": { "type": "string", "required": false },
               "container_limits": {
                 "type": "dict",
                 "schema": {
                   "cpusetcpus": { "type": "string", "required": false},
                   "cpushares": { "type": "string", "required": false},
                   "memory": { "type": "string", "required": false},
                   "memswap": { "type": "string", "required": false}
                 }
               },
               "debug": {
                 "type": "string",
                 "required": false,
                 "allowed": ["no", "yes"]
               },
               "docker_host": { "type": "string", "required": false},
               "dockerfile": { "type": "string", "required": false},
               "force": {
                 "type": "string",
                 "required": false,
                 "allowed": ["no", "yes"]
               },
               "http_timeout": { "type": "integer", "required": false},
               "load_path": { "type": "string", "required": false},
               "nocache": {
                 "type": "string",
                 "required": false,
                 "allowed": ["no", "yes"]
               },
               "pull": { "type": "string", "required": false},
               "repository": { "type": "string", "required": false},
               "rm": {
                 "type": "string",
                 "required": false,
                 "allowed": ["no", "yes"]
               },
               "ssl_version": { "type": "string", "required": false},
               "tag": { "type": "string", "required": false},
               "timeout": { "type": "integer", "required": false},
               "tls": {
                 "type": "string",
                 "required": false,
                 "allowed": ["no", "yes"]
               },
               "tls_hostname": { "type": "string", "required": false },
               "tls_verify": {
                 "type": "string",
                 "required": false,
                 "allowed": ["no", "yes"]
               }
             }
            },
            {"type": "dict",
            "schema": {
               "role": {
                   "type": "string",
                   "required": true,
                   "allowed": ["docker_container"]
               },
               "name": { "type": "string", "required": true },
               "image": { "type": "string", "required": true },
               "command": { "type": "string", "required": false },
               "docker_host": { "type": "string", "required": false},
               "force_kill": { "type": "string", "required": false },
               "keep_volumes": { "type": "string", "required": false },
               "devices": {
                 "type": "list",
                 "required": false,
                 "schema": { "type": "string", "required": true }
               },
               "cpu_period": { "type": "string", "required": false },
               "cpu_quota": { "type": "string", "required": false },
               "cpu_shares": { "type": "string", "required": false },
               "cpuset_cpus": { "type": "string", "required": false },
               "cpuset_mems": { "type": "string", "required": false },
               "dns_opts": {
                 "type": "list",
                 "required": false,
                 "schema": { "type": "string", "required": true }
               },
               "dns_search_domains": {
                 "type": "list",
                 "required": false,
                 "schema": { "type": "string", "required": true }
               },
               "dns_servers": {
                 "type": "list",
                 "required": false,
                 "schema": { "type": "string", "required": true }
               },
               "domainname": { "type": "string", "required": false },
               "entrypoint": { "type": "string", "required": false },
               "env": {
                 "type": "dict",
                 "required": false
               },
               "env_file": { "type": "string", "required": false },
               "etc_hosts": {
                 "type": "dict",
                 "required": false
               },
               "exposed_ports": {
                 "type": "list",
                 "required": false,
                 "schema": { "type": "integer", "required": true }
               },
               "groups": {
                 "type": "list",
                 "required": false,
                 "schema": { "type": "string", "required": true }
               },
               "hostname": { "type": "string", "required": false },
               "kernel_memory:": { "type": "string", "required": false },
               "labels": {
                 "type": "dict",
                 "required": false
               },
               "log_driver": { "type": "string", "required": false },
               "log_options": {
               "type": "dict",
                 "required": false
                },
                "mac_address": { "type": "string", "required": false },
                "memory": { "type": "string", "required": false },
                "memory_reservation": { "type": "string", "required": false },
                "memory_swap": { "type": "string", "required": false },
                "memory_swappiness": { "type": "integer", "required": false },
                "network_mode": { "type": "string", "required": false },
                "networks": {
                  "type": "list",
                  "required": false,
                  "schema": {
                    "type": "dict",
                    "required": true,
                    "schema": {
                      "name": { "type": "string", "required": true },
                      "ipv4_address": { "type": "string", "required": false },
                      "ipv6_address": { "type": "string", "required": false },
                      "links": {
                        "type": "list",
                        "required": false,
                        "schema": { "type": "string", "required": true }
                      },
                      "aliases": {
                        "type": "list",
                        "required": false,
                        "schema": { "type": "string", "required": true }
                      }
                    }
                  }
                },
                "oom_killer": {
                  "type": "string",
                  "required": false,
                  "allowed": ["no", "yes"]
                },
                "oom_score_adj": { "type": "integer", "required": false },
                "output_logs": {
                  "type": "string",
                  "required": false,
                  "allowed": ["no", "yes"]
                },
                "pid_mode": { "type": "string", "required": false },
                "privileged": {
                  "type": "string",
                  "required": false,
                  "allowed": ["no", "yes"]
                },
                "published_ports": {
                  "type": "list",
                  "required": false,
                  "schema": { "type": "string", "required": true }
                },
                "purge_networks": {
                  "type": "string",
                  "required": false,
                  "allowed": ["no", "yes"]
                },
                "read_only": {
                  "type": "string",
                  "required": false,
                  "allowed": ["no", "yes"]
                },
                "recreate": {
                  "type": "string",
                  "required": false,
                  "allowed": ["no", "yes"]
                },
                "restart": {
                  "type": "string",
                  "required": false,
                  "allowed": ["no", "yes"]
                },
                "restart_policy": {
                  "type": "string",
                  "required": false,
                  "allowed": ["no", "on-failure", "always", "unless-stopped"]
                },
                "restart_retries": { "type": "integer", "required": false },
                "security_opts": {
                  "type": "list",
                  "required": false,
                  "schema": { "type": "string", "required": true }
                },
                "shm_size":  { "type": "string", "required": false },
                "ssl_version": { "type": "string", "required": false },
                "stop_signal": { "type": "string", "required": false },
                "stop_timeout": { "type": "integer", "required": false },
                "sysctls": {
                  "type": "dict",
                  "required": false
                },
                "timeout":  { "type": "integer", "required": false },
                "tmpfs": { "type": "string", "required": false },
                "tty": {
                  "type": "string",
                  "required": false,
                  "allowed": ["no", "yes"]
                },
                "ulimits": {
                  "type": "list",
                  "required": false,
                  "schema": { "type": "string", "required": true }
                },
                "user": { "type": "string", "required": false },
                "uts": { "type": "string", "required": false },
                "volume_driver": { "type": "string", "required": false },
                "volumes": {
                  "type": "list",
                  "required": false,
                  "schema": { "type": "string", "required": true }
                },
                "volumes_from": {
                  "type": "list",
                  "required": false,
                  "schema": { "type": "string", "required": true }
                },
                "working_dir": { "type": "string", "required": false }
              }
             }]
        }
  }
}
